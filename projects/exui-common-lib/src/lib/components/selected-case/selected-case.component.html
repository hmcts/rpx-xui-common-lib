<div id="govuk-accordion__section-{{ sharedCase.caseId }}" class="govuk-accordion__section">
  <div class="govuk-grid-row govuk-case-header">
    <div class="govuk-grid-column-three-quarters">
      <h3 id="case-title" class="govuk-case-title">{{ sharedCase.caseTitle }}</h3>
      <h1 id="case-id" class="govuk-case-sub-title">{{ sharedCase.caseId }}</h1>
    </div>
    <div class="govuk-grid-column-twenty-percent">
      <button id="btn-deselect-case" class="govuk-button hmcts-button--secondary" (click)="onDeselect(sharedCase)" title="De select a case">Deselect case</button>
    </div>
    <div class="govuk-accordion__section-header govuk-grid-column-five-percent">
      <div class="govuk-accordion__section-heading">
        <button type="button" id="accordion-with-summary-sections-heading-1"
              aria-controls="accordion-with-summary-sections-content-1" class="govuk-accordion__section-button"
              aria-describedby="accordion-with-summary-sections-summary-1" aria-expanded="false" title="Expand or Collapse">
        <span class="govuk-accordion__icon" aria-hidden="true"></span></button>
      </div>
    </div>
  </div>
  <div id="accordion-with-summary-sections-content-1" class="govuk-accordion__section-content"
       aria-labelledby="accordion-with-summary-sections-heading-1">
    <div class="govuk-grid-row" *ngIf="showNoUsersAccessInfo()">
      <span id="access-info-no-user" class="govuk-div-align-left">No users from your organisation currently have access to this case.</span>
    </div>
    <div class="govuk-grid-row" *ngIf="showUserHasAccessInfo()">
      <span id="access-info-has-users" class="govuk-div-align-left">Users from your organisation with access to this case.</span>
    </div>
    <table class="govuk-table" *ngIf="showUserAccessTable()">
      <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th id="th-name" class="govuk-table__header" scope="col">Name</th>
        <th id="th-email" class="govuk-table__header" scope="col">Email address</th>
        <th id="th-action" class="govuk-table__header" scope="col">Actions</th>
        <th id="th-label" class="govuk-table__header govuk-table-column-label" scope="col">&nbsp;&nbsp;</th>
      </tr>
      </thead>
      <tbody class="govuk-table__body">
        <tr class="govuk-table__row" *ngFor="let user of combinedSortedShares; index as idx; trackBy: trackByUserId">
          <td id="user-full-name-{{ userIdSetter(canCancel(sharedCase.caseId, user) | async, idx) }}" class="govuk-table__cell">{{ user.firstName + ' ' + user.lastName }}</td>
          <td id="user-email-{{ userIdSetter(canCancel(sharedCase.caseId, user) | async, idx) }}" class="govuk-table__cell">{{ user.email }}</td>
          <td class="govuk-table__cell">
            <a *ngIf="canRemove(sharedCase.caseId, user) | async" (click)="onRemove(user, sharedCase)" href="javascript:void(0);">Remove <span class="govuk-visually-hidden">{{ user.firstName + ' ' + user.lastName }} from case</span></a>
            <a *ngIf="canCancel(sharedCase.caseId, user) | async" (click)="onCancel(user, sharedCase)" href="javascript:void(0);">Cancel <span class="govuk-visually-hidden">adding {{ user.firstName + ' ' + user.lastName }} to case</span></a>
          </td>
          <td class="govuk-table__cell">
            <span *ngIf="isToBeRemoved(sharedCase.caseId, user) | async" class="hmcts-badge hmcts-badge--red">To be removed</span>
            <span *ngIf="isToBeAdded(sharedCase.caseId, user) | async" class="hmcts-badge">To be added</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
