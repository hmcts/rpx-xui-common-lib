<table class="{{'govuk-table ' + classes}}">
  <caption class="govuk-table__caption">{{caption | rpxTranslate}}</caption>
  <thead class="govuk-table__head" >
    <tr class="govuk-table__row">
      @for (h of columnConfig; track h) {
        <th class="govuk-table__header" scope="col">{{h.header | rpxTranslate}}</th>
      }
    </tr>
  </thead>
  <tbody class="govuk-table__body">
    @for (r of rows; track r) {
      <tr data-selector="table-row" class="govuk-table__row">
        @for (col of columnConfig; track col; let isFirst = $first) {
          @if (isFirst && firstCellIsHeader) {
            <th data-selector="table-header" class="govuk-table__header" scope="row" >
              @if (!col.type || col.type === 'text' || !r.routerLink) {
                {{r[col.key] | rpxTranslate}}
              }
              @if (col.type === 'link' && r.routerLink) {
                <a class="govuk-link" [routerLink]="r.routerLink">{{r[col.key] | rpxTranslate}}</a>
              }
            </th>
          }
          @if (!(isFirst && firstCellIsHeader)) {
            <td data-selector="table-cell" class="govuk-table__cell" >
              @if (col.type === 'date') {
                {{formatDate(r[col.key]) | rpxTranslate}}
              }
              @if (!col.type || col.type === 'text' || !r.routerLink) {
                {{r[col.key] | rpxTranslate}}
              }
              @if (col.type === 'link' && r.routerLink) {
                <a class="govuk-link" [routerLink]="r.routerLink">{{r[col.key] | rpxTranslate}}</a>
              }
            </td>
          }
        }
      </tr>
    }
  </tbody>
</table>
